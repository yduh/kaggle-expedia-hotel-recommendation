# Expedia Hotel Recommendations
Which hotel type will an Expedia customer book? \
This is a data analysis to predict the likelihood a user stay at 100 different hotel groups. Kaggle competition link [here](https://www.kaggle.com/competitions/expedia-hotel-recommendations/overview).

## Introduction
Expedia provided lots of logs of customer search behavior. These includes what customers searched for, how they interacted with the results (i.e. click only or book), whether or not the search result was a travel package, etc. It indicate the behavior of a part of a random selected customers but not representive for the all groups.

As for the target, Expedia has in-house algorithms to form hotels as *hotel_cluster*, where similar hotels (in terms of customer searches) are grouped together. This helps to serve as a good identifier of a type of a hotel is for customers, while avoiding problems such as a cold start when a new hotel is added in our search list. 

Our task of the analysis is to predict the booking outcome (*hotel_cluster*) for user search events. Hotels are clustered into 100 different groups. 

## Data
The train and test data sets are separated based on time: training data is from 2013 and 2014, and test data is all from 2015. Training data has logs both for click and book, while test only with the booking records.

## Metric
We can make up to 5 predictions for each user event. The performance of the prediction will be evaluated according to the Mean Average Precision (MAP@5).
A detailed explanation can be found [here](https://www.kaggle.com/code/debarshichanda/understanding-mean-average-precision/notebook).


## Frame the problem
We tackle this analysis problem in 3 different approaches:

1. The first method doesn't need ML modelling, just count the top 5 most often booked *hotel_cluster* of each *srch_destination_id*. There is no personalized recommendation, and only the same predicting results are made for the destination.

2. Another way is define this problem as one hundred classification problems. For each classification problem, we only predict the possibility that a specific *hotel_cluster* will be booked. Because we have 100 *hotel_cluster*, each user event has 100 classification probabilities corresponding to these 100 groups. The recommending results can be generated by taking the top 5 highest possibilties. 

3. The last method improves the previous, and only intends to make a classification model. We can duplicate the user event a hundred times with mark the reservation of this 100 *hotel_cluster* as yes or no in sequence. This can help outlines the relationship between hotel groups. For example, it allows us to introduce functions such as how often a *hotel_cluster* is booked, and we don't need to worry that it will bring data leakage when modelling. In our actual practice, we further aggregate the booking and clicking frequencies with *srch_destination_id* and *hotel_cluster*. It is like a two-dimensional matching and these features are of great help to the performance of the model. The final prediction is made by taking the top 5 highest possibilities of each user event. 

See my [jupyter notebook](https://github.com/yduh/kaggle-expedia-hotel-recommendation/blob/main/analysis.ipynb) for more details and results.

## Dependencies/Libraries:
Coding in Python3 in Jupyter Notebook IDE, the following libraries are expected: 
* Numpy
* pandas
* Matplotlib
